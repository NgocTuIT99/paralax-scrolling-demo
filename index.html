<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="xxx">
      <div class="keyart" id="nonparallax"></div>
      <div class="keyart" id="parallax">
        <div class="keyart_layer parallax" id="keyart-0" data-speed="2"></div>
        <div class="keyart_layer parallax" id="keyart-1" data-speed="5"></div>
        <div class="keyart_layer parallax" id="keyart-2" data-speed="11"></div>
        <div class="keyart_layer parallax" id="keyart-3" data-speed="16"></div>
        <div class="keyart_layer parallax" id="keyart-4" data-speed="26"></div>
        <div class="keyart_layer parallax" id="keyart-5" data-speed="36"></div>
        <div class="keyart_layer parallax" id="keyart-6" data-speed="49"></div>
        <div class="keyart_layer" id="keyart-scrim"></div>
        <div class="keyart_layer parallax" id="keyart-7" data-speed="69"></div>
        <div class="keyart_layer" id="keyart-8" data-speed="100"></div>
      </div>
      <div id="main">dsadsad</div>
    </div>
    <script>
      function castParallax() {
        var opThresh = 350;
        var opFactor = 750;

        window.addEventListener("scroll", function (event) {
          var top = this.pageYOffset;

          var layers = document.getElementsByClassName("parallax");
          var layer, speed, yPos;
          for (var i = 0; i < layers.length; i++) {
            layer = layers[i];
            speed = layer.getAttribute("data-speed");
            var yPos = -((top * speed) / 100);
            layer.setAttribute(
              "style",
              "transform: translate3d(0px, " + yPos + "px, 0px)"
            );
          }
        });
      }

      function dispelParallax() {
        $("#nonparallax").css("display", "block");
        $("#parallax").css("display", "none");
      }

      function startSite() {
        var platform = navigator.platform.toLowerCase();
        var userAgent = navigator.userAgent.toLowerCase();

        if (
          platform.indexOf("ipad") != -1 ||
          platform.indexOf("iphone") != -1
        ) {
          dispelParallax();
        } else if (
          platform.indexOf("win32") != -1 ||
          platform.indexOf("linux") != -1
        ) {
          castParallax();
          if ($.browser.webkit) {
          }
        } else {
          castParallax();
        }
      }

      document.body.onload = startSite();
    </script>
  </body>
</html>
